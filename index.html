<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aeroblade ë”¥í˜ì´í¬ íƒì§€ê¸°</title>
    <style>
        body { font-family: 'Apple SD Gothic Neo', sans-serif; text-align: center; padding: 50px; background-color: #f0f2f5; }
        #drop-area { border: 3px dashed #ccc; border-radius: 20px; width: 80%; max-width: 500px; margin: 0 auto; padding: 60px 20px; cursor: pointer; background-color: white; }
        #drop-area.highlight { border-color: #6c5ce7; background-color: #eef1ff; }
        #result { font-weight: bold; font-size: 1.5em; margin-top: 30px; }
        #details { font-size: 0.9em; color: #555; background: #fff; padding: 15px; border-radius: 10px; display: none; margin-top: 10px; }
        .danger { color: #e74c3c; }
        .safe { color: #27ae60; }
        .loading { color: #3498db; }
        #preview { max-width: 100%; max-height: 200px; margin: 20px auto; display: none; border-radius: 10px; }
    </style>
</head>
<body>
    <h1>ğŸ•µï¸â€â™€ï¸ Aeroblade ë”¥í˜ì´í¬ íƒì§€</h1>
    <p>ì´ë¯¸ì§€ì˜ ë³µì› ì˜¤ì°¨ë¥¼ ë¶„ì„í•˜ì—¬ AI ìƒì„± ì—¬ë¶€ë¥¼ íŒë³„í•©ë‹ˆë‹¤.</p>

    <div id="drop-area">
        <p>ğŸ“· ì´ë¯¸ì§€ë¥¼ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì„¸ìš”</p>
        <input type="file" id="fileElem" accept="image/*" style="display:none" onchange="handleFiles(this.files)">
        <img id="preview" src="" alt="ë¯¸ë¦¬ë³´ê¸°">
    </div>

    <div id="result-container">
        <div id="result"></div>
        <div id="details"></div>
    </div>

    <script>
        const dropArea = document.getElementById('drop-area');
        const fileElem = document.getElementById('fileElem');
        const previewImg = document.getElementById('preview');
        const resultDiv = document.getElementById('result');
        const detailsDiv = document.getElementById('details');

        dropArea.addEventListener('click', () => fileElem.click());

        function handleFiles(files) {
            const file = files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => { previewImg.src = e.target.result; previewImg.style.display = 'block'; };
            reader.readAsDataURL(file);

            uploadFile(file);
        }

        async function uploadFile(file) {
            // [ìˆ˜ì •ë¨] ngrokì—ì„œ ë°œê¸‰ë°›ì€ ì™¸ë¶€ ì ‘ì† ì£¼ì†Œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
            const url = 'https://hee-unsyncopated-adrianna.ngrok-free.dev/predict'; 
            const formData = new FormData();
            formData.append('file', file);

            resultDiv.innerHTML = '<span class="loading">â³ ì •ë°€ ë¶„ì„ ì¤‘...</span>';
            detailsDiv.style.display = 'none';

            try {
                let response = await fetch(url, { method: 'POST', body: formData });
                let data = await response.json();
                
                if (data.is_fake) {
                    resultDiv.innerHTML = `<span class="danger">ğŸš¨ ${data.result}</span>`;
                    detailsDiv.innerHTML = `ì˜¤ì°¨ ì ìˆ˜: <b>${data.score}</b> (ê¸°ì¤€ ${data.threshold} ë¯¸ë§Œ)`;
                } else {
                    resultDiv.innerHTML = `<span class="safe">âœ… ${data.result}</span>`;
                    detailsDiv.innerHTML = `ì˜¤ì°¨ ì ìˆ˜: <b>${data.score}</b> (ê¸°ì¤€ ${data.threshold} ì´ìƒ)`;
                }
                detailsDiv.style.display = 'inline-block';
            } catch (error) {
                resultDiv.innerText = "âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨";
            }
        }
    </script>
</body>
</html>